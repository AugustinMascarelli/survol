Si SLP, on peut utiliser les attributs pour dire quel genre d'info est stockee,
quel est l'index etc...
D'un autre cote ca nous oblige a coller a SLP.

Peut-etre utiliser nmap qui peut renvoyer des infos interessantes sur le reseau ?

Eventuellement RDP (Remote Desktop Protocol) pour avoir une liste de processes sur les
machines Windows.

Transformer une operation de merge en une source d'informations: Il suffit de lister
son URL, enregistrer ses parametres et declarer avec SLP par exemple.

=============================================
Noms:
Survol
SysExplain
AppExplain
Sys-X-Plain

=============================================
http://docs.fedoraproject.org/en-US/Fedora/17/html/System_Administrators_Guide/sect-System_Monitoring_Tools-Net-SNMP-Retrieving.html

HOST-RESOURCES-MIB::hrSWRun  	 Contains a listing of all running processes. 
=============================================
UDP:
Etablir la correlation entre:
* Des trames UDP venant d'un certain process, vers une adresse multicast donnée (Ou
bien eventuellement on regroupe) et un port donné.
* Des processes qui manifestent une certaine activité quand cette trame
arrive. Comme cette trame est traitée dans du code utilisateur,
et pas forcement dansune librairie donnée, on ne peut que se referer
a l'activité CPU.

Toutefois, on peut s'aider de lsof/netstat pour reduire le nombre
de processes possibles?

On pourrait se connecter a tous les messages TIBCO et verifier les processes 
qui reagissent. Ca revient au meme probleme:
- Des evenements d'une part (Trames UDP ou n'importe quoi d'autre
associés soit a une adresse IP ou bien un sujet tibco)
- D'autre part la reactivite des processes.

Voir si on pourrait maquetter avec gdb, ptrace etc...
=============================================

Utiliser d3.js pour creer des plots 3D ?
Ou plutot vis.js qui utilise canvas et est donc plus rapide.
On voudrait integrer ceci: On prend un CSV quelconque et on genere
un graphe. Ca, c'est l'equivalent de "rdfdot", la transformation en quelque chose de visible.
http://d3-generator.com/

Mais on veut aussi permettre de faire des traitements numeriques sur les CSV,
style moyenne, somme etc... qui eux-memes generent d'autres CSV.

Bref: On va avoir des liens qui generent du CSV, eventuellement en continu.
On utilise le mime type: text/csv, pour appeler le bon programme.

On pourrait associer un predicat RDF a un nom de colonne CSV.
Et une valeur CSV a un litteral associé a ce predicat.
=> Modifier les valeurs d'un fichier dot grace a un CSV.
=> Et creer un petit RDF representant le header d'un CSV.

Par exemple, le resultat d'un "ps -ef" peut creer un RDF.

Du coup, transformer des triples RDF en CSV.
Et aussi, lire un CSV et, en javascript, mettre a jour
le RDF et donc les fichiers .dot et SVG.
Par exemple pour reconstituer des evenements,
visualiser un vmstat dans un graphe SVG.

============================================
http://www.w3.org/TR/rdf-mt/

Il faut s'assurer que le merge permet par exemple que processes ayant le meme 
pid se retrouvent fusionnes.
Si ce n'est pas le cas, il faut une regle permettant de construire le meme URN
par exemple pour le meme pid.

Quelles sont les regles du merge en RDF ????

http://www.w3.org/TR/rdf-mt/

To merge N-Triples documents it is necessary to check if the same nodeID
is used in two or more documents, and to replace it with a distinct nodeID
in each of them, before merging the documents.

Ca veut dire qu'il ne faut surtout pas creer des blank nodes en esperant que
le merge de RDF sera capable de les fusionner.
==============================================
Details sur les CSV et les mime-type:
http://stackoverflow.com/questions/398237/how-to-use-the-csv-mime-type

http://stackoverflow.com/questions/15457752/proper-syntax-for-optional-header-parameter-for-text-csv-mimetype

http://blog.teksol.info/2009/04/06/returning-csv-data-to-the-browser-revisited.html
text/csv; charset=UTF-8; header=present

==============================================
Periodicite: On en revient a notre probleme de snapshot CPU+memoire
qui determine tout.

On pourrait faire simple, se focaliser sur /proc,
mais faire des traitements complexes derriere.
==============================================
Generer du SNMP pour MRTG?

============================================
Avec DOT, on peut, je crois representer des graphes imbriques.
S'en servir pour mettre representer la hierarchie des sous-processes
sans modifier le dessin d'ensemble.
Aussi, probablement necessaire pour AC2.

============================================
Dans KDE, dessin des rectangles emboités pour representer des 
grandeurs imbriquees: Treemap: http://bl.ocks.org/mbostock/4063582
Ou des cercles:
http://bl.ocks.org/mbostock/4063530

La aussi, on peut mettre notre connaissance des OS.
Par exemple decomposer un executable en ses librairies (Visualiser ldd),
au point de vue de la taille mais aussi du temps passe dans le code.
Ou un dtrace.
Ou un strace en prenant en compte la creation des sous-processes.
============================================
Doit-on exprimer l'imbrication de facon generique ou bien
en s'appuyant sur du RDF?
* Processes.
* Fichiers (Avec l'exception des links symboliques ou hards).
* Eventuellement les reseaux (Mais on ne sait pas faire pour le moment)
* Pas les user-groups.

============================================
Detecter des dependances:
 Echantillonner l'etat des processes.
grep  "State:[   ]*[A-RT-Z]" /proc/*/status

Correler avec d'autres evenements.
http://www.mathworks.com/matlabcentral/answers/60725

https://en.wikipedia.org/wiki/Mutual_information

Arriver a correler un network storm avec l'activité de tel ou tel process.
============================================
Liens entre les pages de visualisation.

On doit avoir sur une meme page des listes de CGI qu'on peut fusionner
soit en RDF soit en CVS et peut etre un melange des deux.

Mais peut-on melanger tous les liens ensemble?

Exemple:
CGI qui affiche la liste des processes,
et un autre la liste des segments de memoire dans un process
https://www.kernel.org/doc/Documentation/filesystems/proc.txt
cat /proc/self/maps

b55bc000-b56fa000 r--s 00000000 08:01 412045     /var/tmp/kdecache-rchateau/ksycoca
b56fa000-b571d000 r-xp 00000000 08:01 35037      /usr/lib/kde3/konq_sidebartree_dirtree.so
 r = read
 w = write
 x = execute
 s = shared
 p = private (copy on write)

Comment visualiser cette page pour un process seulement?

################################################################################

# http://www.graphviz.org/Gallery/directed/cluster.html

# Pour tirer parti des blocs (sous-reseaux) dans graphviz, on pourrait regrouper
# des objets qui ont une propriete commune (Threads d un process,
# fichiers dans un dir, de facon recursive, methodes dans une classe),
# Ca evite meme de devoir tracer des aretes !!!
# ou tout simplement le host, comme container: subgraphes, clusters.

============================================
A quoi ca sert d'utiliser le format CSV pour des snapshots quand RDF
rend parfaitement le meme service?

Le seul interet du format CSV est pour des donnees en continu,
mais c est quelque chose de particulier que d3 ne couvre a priori pas.

On peut aussi avoir en quelqe sorte des donnees en continu en RDF,
il suffit de rappeler le meme script. Non: L'interet du CSV est
pour des donnees en continu sans polling.
Mais nous, on se concentre sur la logique des processes.

============================================
Afficher avec d3, style MRTG.
============================================
Ajouter un plugin a Nagios ???
C'est a dire qu'on ajouterait un adapteur a nos scripts CGI
pour en faire des plugins Nagios.
============================================
Choisir des parametres pour graphviz, mais aussi
permettre d'afficher du RDF avec d3.
Donc bien separer le merge de la visualisation?
Au lieu de renvoyer du SVG, on renverra du Javascript
avec des appels D3?
============================================
Les bookmarks ont un titre qui contient des slahes permettant de definir des sous-niveaux.
Pour le renommage, on detruit un ancien nom et construit un nouveau,
c'est la commande update.
On doit donc associer un titre arborescent avec un sous-objet
dans un arbre en json.
============================================
Meta-CGI
Accumuler des triplets d'un cgi rdf.
Ca permet de "moyenner" des snapshots.
============================================
Apparemment, on ne peut pas ajouter de meta-data a un fichier RDF.
L'objectif etait de donner un rapport d'execution d'un URL,
a l'URL appelant. Notamment, on voulait permettre au sous-url
de faire des filtrages de donnees, lourds en CPU et memoire, par exemple
isoler uniquement les triplets relatifs a un noeud particulier.
Le faire au plus bas niveau possible est tres profitable. Et donc,
si le sous-url n'est pas capable de le faire, faire le filtrage
dans l'URL appelant, ce qui est plus couteux.
Aussi, dire explicitement a l'URL appelant que telle ou telle requete n'est pas possible.

Autre approche pour signaler des erreurs:
On renvoie les messages directement dans le document RDF, ce qui fait que 
l'utilisateur ne peut pas les eviter.
Par exemple, en creant des nodes artificiels. Mais il faudrait que ca aie un sens,
ce qui est parfois possible.
Autrement dit, on integre les erreurs dans les donnees normales, traitees normalement.
Ca a l'avantage de ne jamais les perdre.
============================================

IBM MQ Light
https://developer.ibm.com/answers/questions/14213/how-to-get-vcap-services.html
BlueMix
VCAP_SERVICES
============================================
Le mode HTML devrait fabriquer un rapport en texte, decrivant la page.

J ai vu dans les sysinternals tools qu'on peut avoir une description d un exe.

Fichiers ouverts d une autre machine (psfile.exe)

kde kioslave

Lister le contenu des RPM

============================================
win32net.NetFileEnum
https://msdn.microsoft.com/fr-fr/library/windows/desktop/bb525378%28v=vs.85%29.aspx

Returns information about some or all open files on a server, depending on the parameters specified.

============================================
win32net.NetShareGetInfo
============================================
NetSessionEnum
Provides information about sessions established on a server.
============================================
win32net.NetSessionGetInfo
============================================
win32process.EnumProcesses
============================================
win32process.EnumProcessModules
============================================
win32ts.ProcessIdToSessionId
Retrieves the Remote Desktop Services session associated with a specified process.
============================================

Ajouter les NetGroup aux NetLocalGroup: Quelle est la difference ?

Logiquement, plein de scripts qui sont dans sources_top devraient etre dans sources_types/CIM_ComputerSystem,
avec une valeur par defaut pour le host courant.
Par exemple la liste des processes etc... Sans grande importance: On peut dupliquer ces scripts.
Entretemps, on pourrait, a partir de sources_top, pointer vers les scripts de CIM_ComputerSystem pour  le host courant.

============================================

Pour associer la meme entite vue de deux facons, on crée un lien avec la propriete pc.equivalent_node.
Par exemple, si on cree une entite avec son lien wmi, on cree aussi le node comme si le hostname
faisait tourner survol (Ca s'appelle le node canonique decrivant une entite),
et on relie les deux avec pc.equivalent_node

Exemple: le même processus sur Titi vue avec Wmi de ma machine, et en se connectant sur titi.

Donc, si on va merger, on ajoute un argument cgi will_merge_remote_entities.
Si positionne, quand on fait un entite remote, on ajoute son node canonique, cad comme si survol tournait sur le node en question.
Et on relie les deux avec pc.equivalent_node.

Dans le processus de creation dd l affichage, quand on detecte des liens pc.equivalent:
Si le node canonique marche, car survol est installe sur cette machine, alors on affiche normalement
s’il ne marche pas car pas de survol, et si le node canonique est connecte a d autres nodes, on le garde mais non clickable.
Sinon, on n affiche pas le node canonique.
Pour savoir si survol est installe, on peut utiliser slp ou bien des ports par defaut. On suppose qu il est installe.
Ou bien, si equivalent a un node tout seul, on l'affiche comme une propriete, afin de ne pas encombrer
l'affichage.

Seul hic: ce nettoyage intervient lors de la creation du dot: il vaudrait mieux epurer le rdf pour que tous les affichages en beneficient.

Comment definir le node canonique d'une entite qui n'est pas clairement liee a une machine ?
Est-ce qu'une telle entite existe ?

============================================
Sur can_remote
Ca ne sert qu'à planter un script si le remote host est mis.
Mais le script ne sera pas affiché si test variable globale car aucun n'était affiche maintenant.
 Les scripts remote sont affiches autrement, sans exploration et ce test est inutile.
Donc ?
============================================

"class_type_all.py": "Generic class",
Au lieu d afficher "Generic class", mettre si namespace ou bien classe etc...
Ou bien "Sub class" ou "virtual class" si pas de direcotyr associe.
Et dans obj_types.py, en -dessous de CIM_Process, on affiche "Generic class CIM_Process/memory_regex_search"
alors que c'est un simple module sans ontologie.

============================================
Pour associer la meme entite vue de deux facons, on cree un lien avec la propriete pc.equivalent

Exemple: le meme process sur Titi vue avec Wmi de ma machine, et en se connectant sur titi.

Donc, si on va merger, on ajoutr ... ?

Types dynamiques: on ajoute "/" et on remplit certains caches.
Si un type n a pas d ontologie, on peut remonter la hierarchie des modules.
Idem pour AddInfo. Meme logique que pour les attributs graphiques. Et d'ailleurs utiliser le meme code. Peut etre utiliser ca pour les fichiers, si certaines extensions tres specifiques doivent etre traitees a part.
Liens symboliques: entite specifique.
Premiere page: reprendre des elements du desktop pour le look:
Et pourquoi les scripts AC2 dans  entity n ont pas la bonne couleur ?

============================================
Pour un process afficher l environnement et essayer d associer quelque chose,
probablement un fichier.
Notamment pour le PATH.

========================================================================================================================
========================================================================================================================

Trier les processes en fonction du langage.

Donc tenir compte du langage. Ce qui permet d'analyser intelligemment les variables d environnement.

Et on peut donner une couleur differente aux processes, trouvee dans les __init__.py.

Interpreteurs: Sous unix, utiliser le shebang.

On a un sous-directory par interpreteur, cad par type de process, avec des scripts specifiques:

* CIM_Process/perl
* CIM_Process/python
* CIM_Process/erlang
* CIM_Process/java
* CIM_Process/shell

La fonction Usable() verifie dans la ligne de commande, si l'interpreteur correspond:
"java","perl", "bash" etc...

Ce qui fait que meme pour du shell, on peut proposer des scripts car on connait le contexte.
Exemple: Analyser la ligne de commande et en extraire les noms de fichiers.


========================================================================================================================
Perl:
On l implemente en Perl appele par du Python car de toute facon Perl est necessaire.

(1) http://metacpan.org/pod/App::Stacktrace
"perl-stacktrace prints Perl stack traces of Perl threads for a given Perl process.
For each Perl frame, the full file name and line number are printed."

$ perl-stacktrace 24077
0x00d73416 in __kernel_vsyscall ()
/usr/local/bin/cpan:11
/usr/local/lib/perl5/5.12.2/App/Cpan.pm:364
/usr/local/lib/perl5/5.12.2/App/Cpan.pm:295
/usr/local/lib/perl5/5.12.2/CPAN.pm:339
/usr/local/lib/perl5/5.12.2/Term/ReadLine.pm:198

Tout en haut, comme les packages Python, on pourrait lister les modules Perl (Style CPAN).
Et donc creer un directory "Langages".

========================================================================================================================

Python:

(1) $ sudo pip install pyrasite
https://news.ycombinator.com/item?id=3014484 It uses gdb
$ echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope # If YAMA activated, see below.
$ pyrasite-shell 16262
>>> globals()
>>> print(db_session)
>>> run_some_local_function()
>>> some_existing_local_variable = 'new value'
# Le process n est pas interrompu. On peut modifier les variables ! Marche que sous Linux.


Plusieurs scripts possibles:
- Afficher les globales.
- afficher la pile et les locales a chaque niveau.
- Afficher les modules et leurs variables.

Pour un symbole Python, le fichier est un fichier Python.

Les globales sont: process+module+nom autrement dit: pid+symbole.
Si le module est un fichier python, on deduit que c'est une variable python.

Symbole partage par plusieurs processes ? Ce serait shared_mem+symbole.

Un module charge par un process, cest davantage qu'un module dans un fichier: Taille memoire etc...

pdb : Cannot interrupt a running process.
http://stackoverflow.com/questions/4163964/python-is-it-possible-to-attach-a-console-into-a-running-process

(2) Afficher le PYTHON_PATH


========================================================================================================================
Java:
On l implemente en Java appele par du Python car de toute facon Java est necessaire.

(1) http://stackoverflow.com/questions/376201/debug-a-java-application-without-starting-the-jvm-with-debug-arguments
http://docs.oracle.com/cd/E19205-01/819-5257/blabw/index.html

Debugging a Program With dbx using the Process ID:
$ dbx [program_name|program_name{.class | .jar}|-] process_id

(2)http://docs.oracle.com/javase/7/docs/technotes/guides/jvmti/
Java™ Virtual Machine Tool Interface (JVM TI) is a native programming interface for use by tools.
It provides both a way to inspect the state and to control the execution of applications
running in the Java virtual machine (JVM). JVM TI supports the full breadth of tools that need access to JVM state,
including but not limited to: profiling, debugging, monitoring, thread analysis, and coverage analysis tools.

JVM TI replaces the Java Virtual Machine Profiler Interface (JVMPI)
and the Java Virtual Machine Debug Interface (JVMDI).
http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html

https://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture
========================================================================================================================
Shell

(1) Regarder l'arborescence des sous-processes. eventuellement on va y trouver la pile des scripts.
(2) Scanner le script.
(3) Afficher le PATH

========================================================================================================================
Erlang

(1) Live inspection of running code without prior instrumentation is a great feature of Erlang
========================================================================================================================
Mono
On l implemente en Mono appele par du Python car de toute facon Mono est necessaire.

(1) The debugger agent is a module inside the mono runtime which offers debugging services to client programs.
http://www.mono-project.com/docs/advanced/runtime/docs/soft-debugger/
The client library is a C# assembly which uses the wire protocol to communicate
with the debugger agent running inside the mono runtime.

========================================================================================================================
Dans le cas general, afficher les globales si Linux (Mais peut etre aussi Windows si gdb y tourne)

http://stackoverflow.com/questions/6261392/printing-all-global-variables-local-variables

========================================================================================================================
Attach to a running instance of a COM application

Peut-etre Excel ou VBA ? Interroger un process Excel ?

http://timgolden.me.uk/python/win32_how_do_i/attach-to-a-com-instance.html
========================================================================================================================
